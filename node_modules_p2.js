// Cluster module
// we need cluster module bacause one nodejs server cannnot handle many concurrent users like for example 2000
// cluster can run multiple instances of nodejs
// basically to distribute work load

const cluster = require('cluster')
const  os = require('os')

const totalCPUs = os.cpus.length;

if(cluster.isPrimary){
  for(let i = 0 ; i < totalCPUs ; i++){
    cluster.fork()
  }
}else{
  const app = express()
  const PORT = 8000

  app.get("/" ,(req,res) => {
    return res.json({message : `Hello from express server ${process.pid})
  })
}

app.listen(PORT, () => console.log(`Server is running on ${PORT}`)


